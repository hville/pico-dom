(function(){function z(){if("undefined"!==typeof window)return A(window);throw Error("undefined window global (global or module property)");}function A(a){return Object.defineProperties(f,{document:{value:a.document},window:{value:a}})}function t(a){return f.document.createTextNode(a)}function u(a){return f.document.createComment(a)}function B(a,b,d){for(var c=0,e=Object.keys(a);c<e.length;++c)d=b.call(void 0,d,a[e[c]],e[c],a);return d}function G(a,b,d){!1===b?a.removeAttribute(d):a.setAttribute(d,
!0===b?"":b);return a}function H(a,b,d){a[d]!==b&&(a[d]=b);return a}function C(a,b){if(b)for(var d=0,c=Object.keys(b);d<c.length;++d){var e=c[d];switch(e){case "xmlns":case "input":a[e]=b[e];break;case "attrs":case "props":case "extra":a[e]||(a[e]={});for(var h=b[e],g=0,f=Object.keys(h);g<f.length;++g)a[e][f[g]]=h[f[g]]}}return a}function D(a){return function(b){return function(d){var c=C({},b),e=[],h;if("string"===typeof d){h=d.replace(I,"").match(J);if(!h)throw Error("invalid selector: "+d);h.reduce(K,
c);h=f.document;var g=c.tagName||"div",m=c.h;h=m?h.createElementNS(m,g):h.createElement(g)}else h=d;for(g=1;g<arguments.length;++g)(m=arguments[g])&&m.constructor===Object?C(c,m):E.call(e,m);return a(h,c,e)}}}function E(a){if(null!=a)switch(null==a?a:a.constructor||Object){case Array:a.forEach(E,this);break;case Number:this.push(t(""+a));break;case String:this.push(t(a));break;default:this.push(a)}}function K(a,b){var d,c;a.a||(a.a={});switch(b[0]){case "[":d=b.indexOf("\x3d");c=b.slice(1,d);-1===
d?a.a[c]=!0:d===b.length-2?a.a[c]=!1:(b=b.slice(d+1,-1),"xmlns"===c?a.h=b:a.a[c]=b);break;case ".":c=b.slice(1);a.a.i?a.a.i+=" "+c:a.a.i=c;break;case "#":a.a.id=b.slice(1);break;default:d=b.indexOf(":"),-1===d?a.tagName=b:(a.tagName=b.slice(d+1),a.h=r[b.slice(0,d)])}return a}function F(a,b,d){for(var c=0,e=Object.keys(v);c<e.length;++c){var h=e[c],f=b[h];if(f)v[h](a,f)}for(b=0;b<d.length;++b)c=d[b],c.moveTo?c.moveTo(a):a.appendChild(c);return a}function w(a,b){if(null===b)return a;var d=k.get(b),
c=b.nextSibling;d?(d.clone().moveTo(a),d.j&&(c=d.c.nextSibling)):a.appendChild(w(b.cloneNode(!1),b.firstChild));return w(a,c)}function q(a,b,d,c){if(b)for(var e=0,f=Object.keys(b);e<f.length;++e)this[f[e]]=b[f[e]];void 0!==d&&(this.key=d);this.node=a;k.set(a,this);this.b&&this.b(d,c)}function n(a,b){void 0!==b&&(this.f="function"===typeof b?b:function(a){return a[b]});this.m=new Map;this.j=a;this.b=u("^");this.c=u("$");k.set(this.b,this);k.set(this.c,this)}function L(a){return function(b,d){return a.clone(b,
d)}}var f={get document(){return z().document},get window(){return z().window},set window(a){A(a)}},r={F:"http://www.w3.org/1999/xhtml",g:"http://www.w3.org/2000/svg"},v={a:function(a,b){return b?B(b,G,a):a},G:function(a,b){return b?B(b,H,a):a}},I=/[\"\']+/g,J=/(?:^|\.|\#)[^\.\#\[]+|\[[^\]]+\]/g,p=D(F),x=p();x.g=p({h:r.g});x.u=p;var k="undefined"!==typeof WeakMap?new WeakMap:{set:function(a,b){a.o=b},get:function(a){return a.o}};q.prototype={constructor:q,clone:function(a,b){var d=this.node,c=d.cloneNode(!1);
w(c,d.firstChild);return new q(c,this,a,b)},update:function(){for(var a=this.node.firstChild;a;){var b=k.get(a);b?(b.update.apply(b,arguments),a=(b.c||a).nextSibling):a=a.nextSibling}return this},moveTo:function(a,b){var d=this.node,c=d.parentNode;a?a.insertBefore(d,b||null):c&&c.removeChild(d);this.f&&this.f(c,a);return this}};var p=D(function(a,b,d){return new q(F(a,b,d),b.s,b.input)}),y=p();y.g=p({h:r.g});y.u=p;n.prototype={constructor:n,f:function(a,b){return b},clone:function(){return new n(this.j,
this.f)},moveTo:function(a,b){var d=this.c,c=this.b,e=c.parentNode;if(!e&&!a||e===a&&(b===d||b===d.nextSibling))return this;if(!e)return a.appendChild(c),a.appendChild(d),this;if(!a)return this.l(),e.removeChild(c),e.removeChild(d),this;e=c.nextSibling;b||(b=null);for(a.insertBefore(c,b);e!==d;){var c=e,e=c.nextSibling,f=k.get(c);f?f.moveTo(a,b):a.insertBefore(c,b)}a.insertBefore(d,b);return this},update:function(a){var b=this.b,d=this.c,c=b.parentNode;if(!c)throw Error("list.updates requires a parentNode");
for(var e=this.m,f=this.f,b=b.nextSibling,g=0;g<a.length;++g){var m=a[g],k=f(m,g,a),l=e.get(k);l?l.node===b?b=l.node.nextSibling:l.node===b.nextSibling?(c.insertBefore(b,d),b=l.node.nextSibling):c.insertBefore(l.node,b):(l=this.j(k,g),l.key!==k&&(l.key=k),e.set(k,l),c.insertBefore(l.node,b));l.update&&l.update(m,g,a)}return this.l(b.previousSibling)},l:function(a){var b=this.c;if(!b.parentNode)return this;var d=this.m;a=a||this.b;for(var c;(c=b.previousSibling)!==a;)c=k.get(c),d.delete(c.key),c.moveTo(null);
return this}};f.namespaces=r;f.D=function(){return f.document.createDocumentFragment()};f.text=t;f.A=u;f.C=v;f.element=x;f.s=k;f.v=q;f.B=y;f.w=n;f.list=function(a,b){switch(a.constructor){case Function:return new n(a,b);case q:case n:return new n(L(a),b);default:throw Error("invalid list model:"+typeof a);}};return f})();

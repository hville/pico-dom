(function(){function z(){if("undefined"!==typeof window)return A(window);throw Error("undefined window global (global or module property)");}function A(a){return Object.defineProperties(f,{document:{value:a.document},window:{value:a}})}function t(a){return f.document.createTextNode(a)}function u(a){return f.document.createComment(a)}function B(a,b,c){for(var d=0,e=Object.keys(a);d<e.length;++d)c=b.call(void 0,c,a[e[d]],e[d],a);return c}function G(a,b,c){!1===b?a.removeAttribute(c):a.setAttribute(c,
!0===b?"":b);return a}function H(a,b,c){a[c]!==b&&(a[c]=b);return a}function C(a,b){if(b)for(var c=0,d=Object.keys(b);c<d.length;++c){var e=d[c];switch(e){case "xmlns":case "input":a[e]=b[e];break;case "attrs":case "props":case "extra":a[e]||(a[e]={});for(var g=b[e],h=0,f=Object.keys(g);h<f.length;++h)a[e][f[h]]=g[f[h]]}}return a}function D(a){return function(b){return function(c){var d=C({},b),e=[],g;if("string"===typeof c){g=c.replace(I,"").match(J);if(!g)throw Error("invalid selector: "+c);g.reduce(K,
d);g=f.document;var h=d.tagName||"div",n=d.i;g=n?g.createElementNS(n,h):g.createElement(h)}else g=c;for(h=1;h<arguments.length;++h)(n=arguments[h])&&n.constructor===Object?C(d,n):E.call(e,n);return a(g,d,e)}}}function E(a){if(null!=a)switch(null==a?a:a.constructor||Object){case Array:a.forEach(E,this);break;case Number:this.push(t(""+a));break;case String:this.push(t(a));break;default:this.push(a)}}function K(a,b){var c,d;a.a||(a.a={});switch(b[0]){case "[":c=b.indexOf("\x3d");d=b.slice(1,c);-1===
c?a.a[d]=!0:c===b.length-2?a.a[d]=!1:(b=b.slice(c+1,-1),"xmlns"===d?a.i=b:a.a[d]=b);break;case ".":d=b.slice(1);a.a.j?a.a.j+=" "+d:a.a.j=d;break;case "#":a.a.id=b.slice(1);break;default:c=b.indexOf(":"),-1===c?a.tagName=b:(a.tagName=b.slice(c+1),a.i=r[b.slice(0,c)])}return a}function F(a,b,c){for(var d=0,e=Object.keys(v);d<e.length;++d){var g=e[d],h=b[g];if(h)v[g](a,h)}for(b=0;b<c.length;++b)d=c[b],d.f?d.f(a):a.appendChild(d);return a}function w(a,b){if(null===b)return a;var c=k.get(b),d=b.nextSibling;
c?(c.clone().f(a),c.l&&(d=c.c.nextSibling)):a.appendChild(w(b.cloneNode(!1),b.firstChild));return w(a,d)}function p(a,b,c,d){this.update=L;if(b)for(var e=0,g=Object.keys(b);e<g.length;++e)this[g[e]]=b[g[e]];void 0!==c&&(this.key=c);this.node=a;k.set(a,this);this.b&&this.b(c,d)}function L(){for(var a=this.node.firstChild;a;){var b=k.get(a);b?(b.update.apply(b,arguments),a=(b.c||a).nextSibling):a=a.nextSibling}return this}function M(a){return function(b,c){return a.clone(b,c)}}function q(a,b){this.m=
b?"function"===typeof b?b:function(a){return a[b]}:N;this.o=new Map;this.l=a;this.b=u("^");this.c=u("$");k.set(this.b,this);k.set(this.c,this)}function N(a,b){return b}var f={get document(){return z().document},get window(){return z().window},set window(a){A(a)}},r={F:"http://www.w3.org/1999/xhtml",h:"http://www.w3.org/2000/svg"},v={a:function(a,b){return b?B(b,G,a):a},G:function(a,b){return b?B(b,H,a):a}},I=/[\"\']+/g,J=/(?:^|\.|\#)[^\.\#\[]+|\[[^\]]+\]/g,m=D(F),x=m();x.h=m({i:r.h});x.v=m;var k=
"undefined"!==typeof WeakMap?new WeakMap:{set:function(a,b){a.s=b},get:function(a){return a.s}};p.prototype={constructor:p,clone:function(a,b){var c=this.node,d=c.cloneNode(!1);w(d,c.firstChild);return new p(d,this,a,b)},f:function(a,b){var c=this.node,d=c.parentNode;a?a.insertBefore(c,b||null):d&&d.removeChild(c);this.g&&this.g(d,a);return c}};var m=D(function(a,b,c){return new p(F(a,b,c),b.u,b.input)}),y=m();y.h=m({i:r.h});y.v=m;q.prototype={constructor:q,clone:function(){return new q(this.l,this.m)},
f:function(a,b){var c=this.c,d=this.b;if(!a){this.g();if(a=d.parentNode)a.removeChild(d),a.removeChild(c);return this}if(!d.parentNode)return a.appendChild(d),a.appendChild(c),d;var e=c.previousSibling;for(c!==b&&(b=a.insertBefore(c,b||null));e!==d;)c=e,e=c.previousSibling,(c=k.get(c))&&(b=c.f(a,b));d!==b&&(b=a.insertBefore(d,b));return b},update:function(a){var b=this.b,c=this.c,d=b.parentNode;if(!d)throw Error("list.updates requires a parentNode");for(var e=this.o,g=this.m,b=b.nextSibling,h=0;h<
a.length;++h){var f=a[h],k=g(f,h,a),l=e.get(k);l?l.node===b?b=l.node.nextSibling:l.node===b.nextSibling?(d.insertBefore(b,c),b=l.node.nextSibling):d.insertBefore(l.node,b):(l=this.l(k,h),l.key!==k&&(l.key=k),e.set(k,l),d.insertBefore(l.node,b));l.update(f,h,a)}return this.g(b.previousSibling)},g:function(a){var b=this.c;if(!b.parentNode)return this;var c=this.o;a=a||this.b;for(var d;(d=b.previousSibling)!==a;)d=k.get(d),c.delete(d.key),d.f(null);return this}};f.namespaces=r;f.D=function(){return f.document.createDocumentFragment()};
f.text=t;f.A=u;f.C=v;f.element=x;f.u=k;f.w=p;f.B=y;f.list=function(a,b){switch(a.constructor){case Function:return new q(a,b);case p:case q:return new q(M(a),b);default:throw Error("invalid list model:"+typeof a);}};return f})();

(function(){function y(){if("undefined"!==typeof window)return z(window);throw Error("undefined window global (global or module property)");}function z(a){return Object.defineProperties(f,{document:{value:a.document},window:{value:a}})}function r(a){return f.document.createTextNode(a)}function t(a){return f.document.createComment(a)}function A(a,b,c){for(var d=0,e=Object.keys(a);d<e.length;++d)c=b.call(void 0,c,a[e[d]],e[d],a);return c}function F(a,b,c){!1===b?a.removeAttribute(c):a.setAttribute(c,
!0===b?"":b);return a}function G(a,b,c){a[c]!==b&&(a[c]=b);return a}function B(a,b){if(b)for(var c=0,d=Object.keys(b);c<d.length;++c){var e=d[c];switch(e){case "xmlns":case "input":a[e]=b[e];break;case "attrs":case "props":case "extra":a[e]||(a[e]={});for(var k=b[e],h=0,f=Object.keys(k);h<f.length;++h)a[e][f[h]]=k[f[h]]}}return a}function C(a){return function(b){return function(c){var d=B({},b),e=[],k;if("string"===typeof c){k=c.replace(H,"").match(I);if(!k)throw Error("invalid selector: "+c);k.reduce(J,
d);k=f.document;var h=d.tagName||"div",g=d.g;k=g?k.createElementNS(g,h):k.createElement(h)}else k=c;for(h=1;h<arguments.length;++h)(g=arguments[h])&&g.constructor===Object?B(d,g):D.call(e,g);return a(k,d,e)}}}function D(a){if(null!=a)switch(null==a?a:a.constructor||Object){case Array:a.forEach(D,this);break;case Number:this.push(r(""+a));break;case String:this.push(r(a));break;default:this.push(a)}}function J(a,b){var c,d;a.a||(a.a={});switch(b[0]){case "[":c=b.indexOf("\x3d");d=b.slice(1,c);-1===
c?a.a[d]=!0:c===b.length-2?a.a[d]=!1:(b=b.slice(c+1,-1),"xmlns"===d?a.g=b:a.a[d]=b);break;case ".":d=b.slice(1);a.a.h?a.a.h+=" "+d:a.a.h=d;break;case "#":a.a.id=b.slice(1);break;default:c=b.indexOf(":"),-1===c?a.tagName=b:(a.tagName=b.slice(c+1),a.g=q[b.slice(0,c)])}return a}function E(a,b,c){for(var d=0,e=Object.keys(u);d<e.length;++d){var k=e[d],f=b[k];if(f)u[k](a,f)}for(b=0;b<c.length;++b)d=c[b],d.moveTo?d.moveTo(a):a.appendChild(d);return a}function v(a,b){if(null===b)return a;var c=g.get(b),
d=b.nextSibling;c?(c.clone().moveTo(a),c.j&&(d=c.b.nextSibling)):a.appendChild(v(b.cloneNode(!1),b.firstChild));return v(a,d)}function p(a,b,c,d){if(b)for(var e=0,f=Object.keys(b);e<f.length;++e)this[f[e]]=b[f[e]];void 0!==c&&(this.key=c);this.node=a;g.set(a,this);this.s&&this.s(c,d)}function l(a,b){void 0!==b&&(this.i="function"===typeof b?b:function(a){return a[b]});this.m=new Map;this.j=a;this.c=t("^");this.b=t("$");g.set(this.c,this);g.set(this.b,this)}function K(a){return function(b,c){return a.clone(b,
c)}}var f={get document(){return y().document},get window(){return y().window},set window(a){z(a)}},q={H:"http://www.w3.org/1999/xhtml",f:"http://www.w3.org/2000/svg"},u={a:function(a,b){return b?A(b,F,a):a},I:function(a,b){return b?A(b,G,a):a}},H=/[\"\']+/g,I=/(?:^|\.|\#)[^\.\#\[]+|\[[^\]]+\]/g,n=C(E),w=n();w.f=n({g:q.f});w.w=n;var g="undefined"!==typeof WeakMap?new WeakMap:{set:function(a,b){a.o=b},get:function(a){return a.o}};p.prototype={constructor:p,clone:function(a,b){var c=this.node,d=c.cloneNode(!1);
v(d,c.firstChild);return new p(d,this,a,b)},update:function(){for(var a=this.node.firstChild;a;){var b=g.get(a);b?(b.update.apply(b,arguments),a=(b.b||a).nextSibling):a=a.nextSibling}return this},moveTo:function(a,b){var c=this.node,d=c.parentNode;a?a.insertBefore(c,b||null):d&&d.removeChild(c);this.u&&this.u(d,a);return this},l:function(a){for(var b=parent.lastChild;b&&b!=a;){var c=g.get(b);c?c.moveTo(null):parent.removeChild(b);b=parent.lastChild}return this}};var n=C(function(a,b,c){return new p(E(a,
b,c),b.v,b.input)}),x=n();x.f=n({g:q.f});x.w=n;l.prototype={constructor:l,i:function(a,b){return b},update:function(a){var b=this.c,c=this.b,d=b.parentNode;if(!d)throw Error("list.updates requires a parentNode");for(var e=this.m,f=this.i,b=b.nextSibling,h=0;h<a.length;++h){var g=a[h],l=f(g,h,a),m=e.get(l);m?m.node===b?b=m.node.nextSibling:m.node===b.nextSibling?(d.insertBefore(b,c),b=m.node.nextSibling):d.insertBefore(m.node,b):(m=this.j(l,h),m.key!==l&&(m.key=l),e.set(l,m),d.insertBefore(m.node,
b));m.update&&m.update(g,h,a)}return this.l(b.previousSibling)},clone:function(){return new l(this.j,this.i)},moveTo:function(a,b){var c=this.b,d=this.c,e=d.parentNode;if(!e&&!a||e===a&&(b===c||b===c.nextSibling))return this;if(!e)return a.appendChild(d),a.appendChild(c),this;if(!a)return this.l(),e.removeChild(d),e.removeChild(c),this;e=d.nextSibling;b||(b=null);for(a.insertBefore(d,b);e!==c;){var d=e,e=d.nextSibling,f=g.get(d);f?f.moveTo(a,b):a.insertBefore(d,b)}a.insertBefore(c,b);return this},
l:function(a){var b=this.b;if(!b.parentNode)return this;var c=this.m;a=a||this.c;for(var d;(d=b.previousSibling)!==a;)d=g.get(d),c.delete(d.key),d.moveTo(null);return this}};f.namespaces=q;f.G=function(){return f.document.createDocumentFragment()};f.text=r;f.C=t;f.F=u;f.element=w;f.v=g;f.A=p;f.D=x;f.B=l;f.list=function(a,b){switch(a.constructor){case Function:return new l(a,b);case p:case l:return new l(K(a),b);default:throw Error("invalid list model:"+typeof a);}};return f})();
